---
description: 要件を再述し、リスクを評価し、ステップバイステップの実装計画を作成します。コードに触れる前にユーザーの確認を待ちます。
---

# Plan コマンド

このコマンドは **planner** Agent を呼び出して、コードを書く前に包括的な実装計画を作成します。

## このコマンドの機能

1. **要件の再述** - 何を構築する必要があるかを明確にする
2. **リスクの特定** - 潜在的な問題やブロッカーを洗い出す
3. **ステップ計画の作成** - 実装をフェーズに分解
4. **確認を待つ** - 進める前にユーザーの承認を必ず受ける

## 使用タイミング

`/plan` を使用する場面:
- 新機能を開始する時
- 重要なアーキテクチャ変更を行う時
- 複雑なリファクタリングに取り組む時
- 複数のファイル/コンポーネントに影響がある時
- 要件が不明確またはあいまいな時

## 動作の仕組み

planner Agent は以下を行います:

1. **リクエストを分析** し、要件を明確な言葉で再述
2. **フェーズに分解** 具体的で実行可能なステップを含めて
3. **コンポーネント間の依存関係を特定**
4. **リスクを評価** し、潜在的なブロッカーを洗い出す
5. **複雑さを見積もる**（High/Medium/Low）
6. **計画を提示** し、明示的な確認を待つ

## 重要な注意事項

**重要**: planner Agent は、"yes" や "proceed" などの肯定的な応答で明示的に計画を確認するまで、コードを一切書きません。

変更が必要な場合は以下のように応答:
- "modify: [変更内容]"
- "different approach: [代替案]"
- "skip phase 2 and do phase 3 first"

## 他のコマンドとの連携

計画後:
- `/tdd` を使用してテスト駆動開発で実装
- `/build-and-fix` をビルドエラー発生時に使用
- `/code-review` を完了した実装のレビューに使用

## 関連 Agent

このコマンドは以下に配置された `planner` Agent を呼び出します:
`.claude/agents/planner.md`
